{"version":3,"sources":["message-item.js","message-list.js","input.js","App.js","reportWebVitals.js","index.js"],"names":["messageItem","className","this","props","user","message","React","Component","MessageItem","messages","map","item","userId","id","App","e","console","log","keyCode","sendMessage","refs","messageInput","ref","type","placeholder","onKeyUp","checkEnter","bind","onClick","state","name","userOnline","socket","io","on","response","newMessage","alert","setState","m","ids","_map","max","Math","push","data","userName","objMessage","$","scrollHeight","scrollTop","clientHeight","animate","prop","value","emit","typing","sendnewMessage","login","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e0bdbe66.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default class messageItem extends React.Component {\r\n    render () {\r\n        return (\r\n            <li className={this.props.user? \"message right appeared\": \"message left appeared\"}>\r\n                <div className=\"avatar\"></div>\r\n                <div className=\"text_wrapper\">\r\n                    <div className=\"text\">{this.props.message}</div>\r\n                </div>\r\n            </li>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport Message from './message-item';\r\n\r\n\r\nexport default class MessageItem extends React.Component {\r\n    render () {\r\n        return (\r\n            <ul className=\"messages\">\r\n                {this.props.messages.map(item =>\r\n                    <Message key={item.id} user={item.userId === this.props.user? true: false} message={item.message}/>\r\n                )}\r\n            </ul>\r\n        )\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class App extends React.Component {\r\n\r\n    checkEnter(e) {\r\n      console.log(e)\r\n      if (e.keyCode === 13) {\r\n        this.props.sendMessage(this.refs.messageInput);\r\n      }\r\n    }\r\n    render () {\r\n        return (\r\n           <div className=\"\">\r\n               <div className=\"bottom_wrapper\">\r\n                   <div  className=\"message_input_wrapper\">\r\n                        <input ref=\"messageInput\" type=\"text\" className=\"message_input\" placeholder=\"Type your message here\" onKeyUp={this.checkEnter.bind(this)} />\r\n                   </div>\r\n                   <div className=\"send_message\" onClick={() => this.props.sendMessage(this.refs.messageInput)} ref=\"inputMessage\" >\r\n                        <div className='icon'></div>\r\n                        <div className='text'>Send</div>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport $ from 'jquery';\r\nimport Messages from './message-list';\r\nimport Input from './input';\r\nimport _map from 'lodash/map';\r\nimport io from 'socket.io-client';\r\n\r\nimport './App.css';\r\n\r\nexport default class App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        //Khởi tạo state,\r\n        this.state = {\r\n            messages: [], // danh sách tin nhắn\r\n            user: {id: '', name: ''},// người dùng hiện tại, nếu rỗng sẽ hiển thị form login, có sẽ hiển thị phòng chat\r\n            userOnline:[] // danh sách người dùng đang online\r\n        }\r\n        this.socket = null;\r\n    }\r\n    //Connetct với server nodejs, thông qua socket.io\r\n    componentWillMount() {\r\n        console.log(this.state.user)\r\n        this.socket = io('https://servernb2.herokuapp.com/');\r\n        this.socket.on('newMessage', (response) => {this.newMessage(response)}); //lắng nghe khi có tin nhắn mới\r\n        this.socket.on('loginFail', (response) => {alert('Tên đã có người sử dụng')}); //login fail\r\n        this.socket.on('loginSuccess', (response) => {this.setState({user: {id: this.socket.id, name: response}})}); //đăng nhập thành công \r\n         this.socket.on('updateUesrList', (response) => {this.setState({userOnline: response})}); //update lại danh sách người dùng online khi có người đăng nhập hoặc đăng xuất\r\n\r\n    }\r\n    //Khi có tin nhắn mới, sẽ push tin nhắn vào state mesgages, và nó sẽ được render ra màn hình\r\n    newMessage(m) {\r\n        console.log(m);\r\n        const messages = this.state.messages;\r\n        let ids = _map(messages, 'id');\r\n        let max = Math.max(...ids);\r\n        messages.push({\r\n            id: max+1,\r\n            userId: m.user.id,\r\n            message: m.data,\r\n            userName: m.user.name\r\n        });\r\n        let objMessage = $('.messages');\r\n        if (objMessage[0].scrollHeight - objMessage[0].scrollTop === objMessage[0].clientHeight ) {\r\n            this.setState({messages});\r\n            objMessage.animate({ scrollTop: objMessage.prop('scrollHeight') }, 300); //tạo hiệu ứng cuộn khi có tin nhắn mới\r\n\r\n        } else {\r\n            this.setState({messages});\r\n            if (m.id === this.state.user) {\r\n                objMessage.animate({ scrollTop: objMessage.prop('scrollHeight') }, 300);\r\n            }\r\n        }\r\n    }\r\n    //Gửi event socket newMessage với dữ liệu là nội dung tin nhắn và người gửi\r\n    sendnewMessage(m) {\r\n        if (m.value) {\r\n            this.socket.emit(\"newMessage\", {data:m.value, user: this.state.user}); //gửi event về server\r\n            m.value = \"\"; \r\n        }\r\n    }\r\n    //login để định danh người dùng\r\n    login() {\r\n        this.socket.emit(\"login\", this.refs.name.value); \r\n    }\r\n\r\n    render () {\r\n        return (\r\n           <div className=\"app__content\">\r\n              <h1>chat box</h1>\r\n          {/* kiểm tra xem user đã tồn tại hay chưa, nếu tồn tại thì render form chat, chưa thì render form login */}\r\n              { this.state.user.id && this.state.user.name ? \r\n                <div className=\"chat_window\">\r\n                    {/* danh sách user online */}\r\n                    <div className=\"menu\">\r\n                        <ul className=\"user\">\r\n                        <span className=\"user-name\">{this.state.user.name}</span>\r\n                            <p>Online</p>\r\n                            {this.state.userOnline.map(item =>\r\n                                <li key={item.id}><span>{item.name}</span></li>\r\n                            )}\r\n                        </ul>\r\n                    </div>\r\n                {/* danh sách message */}\r\n                    <div className=\"content\">\r\n                        <Messages user={this.state.user} messages={this.state.messages} typing={this.state.typing}/>\r\n                        <Input sendMessage={this.sendnewMessage.bind(this)}/>\r\n                    </div>\r\n                </div> \r\n                :\r\n                  <div className=\"login_form\">{/* form login */}\r\n                      <input type=\"text\" name=\"name\" ref=\"name\"></input>\r\n                      <input type=\"button\" name=\"\" value=\"Login\" onClick={this.login.bind(this)}></input>\r\n                  </div>\r\n              }\r\n            </div>\r\n        )\r\n    }\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}